<?xml version="1.0" encoding="UTF-8"?>
<panel>
	<section labeli18n="m.uixul.bo.doceditor.fieldsgroup.title">
		<field name="label" hidehelp="true" />
		<field name="tagName" />
		<field name="tagClass" />
		<field name="isBlock" />
		<field name="css" rows="10" cols="100" />
	</section>
	<xul>
		<javascript>
			<field name="mApplyUpdatesButton">null</field>
			<constructor><![CDATA[
				this.mApplyUpdatesButton = this.addActionButton("${trans:m.richtext.bo.actions.applyupdates,js,ucf}", wToolkit.getIcon('check', 'small'));
				var me = this;
				this.mApplyUpdatesButton.addEventListener('command', function(event) {me.onApplyUpdates();}, true);			
				this.extendMethod("updateCommandsUI", this.updateApplyUpdatesUI);
			]]></constructor>
			<method name="updateApplyUpdatesUI">
				<parameter name="event" />
				<body><![CDATA[
					this.mApplyUpdatesButton.disabled = this.modified;
				]]></body>
			</method>
			<method name="onApplyUpdates">
				<parameter name="event" />
				<body><![CDATA[
					this.showTextMessage("${trans:m.richtext.bo.actions.applying-updates,ucf,js}");
					var result = wCore.executeJSON('richtext', 'ApplyUpdates', {}, null, true);
					if (result.status !== 'OK')
					{
						this.showErrorMessage(result.contents.errorMessage);
						return false;
					}
					else
					{
						this.showTextMessage("${trans:m.richtext.bo.actions.updates-applied,ucf,js}");
						return true;
					}
				]]></body>
			</method>
		</javascript>
	</xul>
</panel>